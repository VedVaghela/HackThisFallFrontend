<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Automation</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="topbar">
        <div class="page-title">Sensor Analytics</div>
    </div>
    
    <div>
        <div class="navigation">
            <ul>
                <li>
                    <a href="./index.html">
                        <span class="icon"><ion-icon name="laptop-outline"></ion-icon></span>
                        <span class="title">Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="./automation.html">
                        <span class="icon"> <ion-icon name="home-outline"></ion-icon> </span>
                        <span class="title">Home Automation</span>
                    </a>
                </li>
                <li>
                    <a href="./analytics.html">
                        <span class="icon"> <ion-icon name="analytics-outline"></ion-icon> </span>
                        <span class="title">Sensor data</span>
                    </a>
                </li>
            </ul>
            <!-- <div class="toggle"></div> -->
        </div>
    </div>
    <div class="cardBox">
        <div class="card" style="max-width: 18rem;">
            <div class="iconBox">
                <ion-icon name="thermometer-outline"></ion-icon>
                </div><br>
            <div class="data" id="tempdata"></div><br>
            <div class="cardName">Temperature</div>
        </div>
        
  
    <div class="card" style="max-width: 18rem;">
        <div class="iconBox">
            <ion-icon name="water"></ion-icon>
            </div><br>
        <div class="data" id="humdata"></div><br>
        <div class="cardName">Humidity</div>
    </div>
    

    <div class="card" style="max-width: 18rem;">
        <div class="iconBox">
            <ion-icon name="flash"></ion-icon>
            </div><br>
        <div class="data" id="lightdata"></div><br>
        <div class="cardName">Lights</div>
    </div>
    </div>
   
    <div class="chartBox">
        <div class="chartCard">
            <div class="cardName">CHARTS</div>
            <div class="image__wrapper">
                <div class="imgbox" id = "TemperatureChart"><img src="image.jpg"></div>
                <div class="imgbox" id = "HumidityChart"><img src="image.jpg" ></div>
            </div>
        </div>
    </div>
    <div class="alertBox" >
        <ion-icon name="alert-circle"></ion-icon>
        <div class="cardName"> ALERTS !</div><br>
        <div class="cardName">Gas detected: </div>
        <div class="data" id="gasalert"></div><br>
        <div class="cardName">Flame detected: </div>
        <div class="data" id="flamealert"></div>
    </div>
    </div>

        <script>
            
            const getdata = async () => {
                try{
                const response = await fetch('https://elegant-colt-hosiery.cyclic.app/note/get');
                const data = await response.json();
                console.log(data);
                document.getElementById("tempdata").innerText=data.temp;
                document.getElementById("humdata").innerText=data.hum;
                document.getElementById("lightdata").innerText=data.light;
                document.getElementById("TemperatureChart").innerHTML = "<img src="+data.temp_url.data+">";
                document.getElementById("HumidityChart").innerHTML = "<img src="+data.hum_url.data+">";
                document.getElementById("gasalert").innerText=data.gas;
                document.getElementById("flamealert").innerText=data.flame;
                }
                catch(error){
                    console.log(error);
                }
            }
            getdata()
            setInterval(getdata,30000)
             
        </script>
        <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>
</html>
